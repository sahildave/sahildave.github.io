<!doctype html> <title>Sketch Plugin Gists - Sahil Dave</title> <meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"> <meta name=description content="Last week I was developing an internal tool to create a design workflow for my workplace. The process involved creating a style guide for a new project by setting up the branding colours, typefaces, shadows and scrim. All went well..."> <meta name=theme-color content=#00bcd4> <link rel=alternate href=/feed.xml type=application/atom+xml> <link rel=apple-touch-icon href=/apple-touch-icon.png> <link rel=icon href=/favicon.png type=image/png> <link rel=icon href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='196' height='196' viewBox='0 0 196 196'>  <path fill-rule='evenodd' stroke='#000' stroke-width='9' d='M88.176,57.836 L77.211,70.994 C74.373,66.092 70.245,62.996 63.924,62.996 C57.861,62.996 51.282,67.64 50.25,73.961 C47.67,90.344 87.402,83.507 82.242,116.144 C79.146,135.623 64.827,149.426 44.961,149.426 C31.545,149.426 22.902,141.686 18,130.463 L32.19,118.466 C33.609,125.948 39.285,132.656 47.412,132.656 C55.152,132.656 61.086,126.077 62.247,118.595 C63.795,108.533 55.023,105.695 47.799,102.728 C36.189,97.568 27.933,91.247 30.384,76.154 C32.964,60.029 47.025,47 63.408,47 C72.051,47 83.274,51.257 88.176,57.836 Z M95.2919095,146.846 L110.642909,49.58 L137.732909,49.58 C165.854909,49.58 181.463909,70.607 177.077909,98.342 C172.691909,125.69 149.987909,146.846 122.252909,146.846 L95.2919095,146.846 Z M127.025909,66.092 L116.834909,130.334 L119.930909,130.334 C143.279909,130.334 154.373909,117.434 157.469909,98.213 C160.823909,77.057 151.664909,66.092 130.121909,66.092 L127.025909,66.092 Z'/></svg>" sizes=any type=image/svg+xml> <link rel=mask-icon href=/mask-icon.svg color=#00bcd4> <link rel=manifest href=/manifest.json> <style>*,:after,:before{padding:0;margin:0;box-sizing:border-box}html{font-size:100%;-webkit-text-size-adjust:none;-moz-text-size-adjust:none;-ms-text-size-adjust:none;text-size-adjust:none;text-rendering:optimizelegibility;image-rendering:optimizequality;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:#fff}body{padding:0 24vw;margin:0 auto 0;font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Arial,sans-serif;font-size:1.6vw;line-height:1.42857143;hanging-punctuation:first allow-end;color:#000;background:#fff;transition:all .2s ease}@media (max-width:1080px){body{padding-left:8vw;padding-right:8vw;font-size:2.24vw}}@media (max-width:640px){body{padding-left:4vw;padding-right:4vw;font-size:3.84vw}}@media (max-width:400px){body{font-size:5.12vw}}a{color:#000;text-decoration:none;transition:color .5s ease,border-color .5s ease,background .5s ease,opacity 1.5s ease}a:focus,a:hover{transition:color .1s ease,border-color .1s ease,background .1s ease,opacity .1s ease;text-decoration:underline;-webkit-text-decoration-skip:ink;text-decoration-skip:ink}hr{border:0}::-webkit-input-placeholder{color:#000;opacity:.2}:-ms-input-placeholder{color:#000;opacity:.2}::-ms-input-placeholder{color:#000;opacity:.2}:focus::-webkit-input-placeholder{color:#00bcd4}:focus:-ms-input-placeholder{color:#00bcd4}:focus::-ms-input-placeholder{color:#00bcd4}.js-system--apple{-webkit-font-feature-settings:"case","ss01","ss02";font-feature-settings:"case","ss01","ss02"}.navigation{padding-top:1.4vmax;padding-bottom:1.4vmax;margin-right:-1vmax;margin-left:-1vmax;font-size:60%;font-weight:700;letter-spacing:.45em;text-transform:uppercase}.navigation li{display:inline-block;line-height:2;list-style:none}.navigation li a{padding:.5em 1vmax}.navigation li a:focus,.navigation li a:hover{color:#00bcd4;text-decoration:none}.content{margin-bottom:8vmin}.content:after,.content:before{display:table;content:""}.content:after{clear:both}.content article>:last-child{margin-bottom:0!important}.content article>:last-child>:last-child{margin-bottom:0!important}.content article>:last-child>:last-child>:last-child{margin-bottom:0!important}.content article>:last-child>:last-child>:last-child>:last-child{margin-bottom:0!important}.content .post-content>:first-child{margin-top:0}.content a{font-weight:700}.content a:has(>code){-webkit-text-decoration-color:#00cc80;text-decoration-color:#00cc80}.content p{margin-bottom:1.6rem;line-height:1.71428571}.content header{display:-webkit-box;display:flex;padding-top:10vmin;padding-bottom:10vmin;margin-bottom:8vmin;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;background:rgba(0,0,0,.02);padding-left:24vw;padding-right:24vw;margin-left:-24vw;margin-right:-24vw}@media (max-width:1080px){.content header{min-height:calc(50vh - 1.4vmax * 2 - 3ex);padding-top:16vmin;padding-bottom:8vmin;padding-left:8vw;padding-right:8vw;margin-left:-8vw;margin-right:-8vw}}@media (max-width:640px){.content header{padding-left:4vw;padding-right:4vw;margin-left:-4vw;margin-right:-4vw}}.content header h1{font-size:360%;font-weight:700;letter-spacing:-.04em;margin-left:-2px;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.1}@media (max-width:640px){.content header h1{font-size:280%}}.content h2,.content h3{margin:10vmin 0 1rem;font-size:72%;font-weight:400;opacity:.5}.content ol{margin-bottom:1.8rem;list-style:none;counter-reset:list}@media (max-width:640px){.content ol{margin-left:1em}}.content ol li{line-height:1.71428571}.content ol li:before{position:absolute;display:inline-block;width:4em;margin-top:1px;margin-left:-4em;font-size:80%;line-height:2.14285714;text-align:right;opacity:.6;pointer-events:none}.content ol li:before{counter-increment:list;content:counter(list) ".";padding-right:.3em}.content hr::before{display:block;content:'';width:3px;height:3px;margin:2em auto;border-radius:50%;background:#000;box-shadow:24px 0 0 0 #000,-24px 0 0 0 #000}.content code,.content pre{font-family:Menlo,Consolas,monospace;color:#00cc80}.content pre{background:rgba(0,136,255,.04)}.content code{font-size:92%;overflow-wrap:break-word}.content .highlight>pre,.content .highlighter-rouge pre.highlight,.content pre{padding:1.2vw;margin-left:-1.2vw;margin-right:-1.2vw;margin-bottom:1.8rem;overflow-x:auto;font-size:80%;line-height:1.71428571;-webkit-overflow-scrolling:touch}@media (max-width:1080px){.content .highlight>pre,.content .highlighter-rouge pre.highlight,.content pre{padding-left:8vw;padding-right:8vw;margin-left:-8vw;margin-right:-8vw}}@media (max-width:640px){.content .highlight>pre,.content .highlighter-rouge pre.highlight,.content pre{padding-left:4vw;padding-right:4vw;margin-left:-4vw;margin-right:-4vw}}.content .highlight>pre code,.content .highlighter-rouge pre.highlight code,.content pre code{overflow-wrap:normal}.content table{border-collapse:collapse;border-spacing:0;font-size:90%;width:100%;margin-left:-1.2vw;margin-right:-1.2vw;margin-bottom:1.8rem}@media (max-width:1080px){.content table{width:calc(100% + (8vw * 2));margin-left:-8vw;margin-right:-8vw}}@media (max-width:640px){.content table{width:calc(100% + (4vw * 2));margin-left:-4vw;margin-right:-4vw}}.content table td{padding:.6em 1.2vw}.content table td:first-child{padding-left:1.2vw}.content table td:last-child{padding-right:1.2vw}@media (max-width:1080px){.content table td:first-child{padding-left:8vw}.content table td:last-child{padding-right:8vw}}@media (max-width:640px){.content table td:first-child{padding-left:4vw}.content table td:last-child{padding-right:4vw}}.content table td{border-top:1px solid rgba(0,0,0,.04)}.post-modified-date{font-size:75%;opacity:.5}.footer{padding:8vmin 0 4vmin;font-size:75%;text-transform:lowercase}.footer ul li{display:inline}.footer ul li:after{padding:0 1vmax;content:" / ";opacity:.3}.footer ul li:last-child:after{content:none}.gist{font-size:80%!important}.gist .gist-data{font-family:Menlo,Consolas,monospace!important}.gist .highlight{font-size:90%!important}@media print{*,:after,:before{background:0 0!important;color:#000!important;box-shadow:none!important;text-shadow:none!important}body{padding:10mm!important;margin:0!important}a,a:visited{text-decoration:none}.content header{min-height:0;padding-bottom:0}.content .post-content{max-width:100%!important}.content .post-content a[href]:after{content:" (" attr(href) ")";font-weight:400}pre{page-break-inside:avoid}tr{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}.footer,.navigation{display:none}}.highlight>pre,.highlighter-rouge pre.highlight{background:rgba(0,56,64,.02)}.highlight code,.highlighter-rouge code{color:#656e6f}.highlight .cm,.highlighter-rouge .cm{font-style:italic}.highlight .k,.highlighter-rouge .k{font-weight:700}.highlight .kd,.highlighter-rouge .kd{font-weight:700}.highlight .nx,.highlighter-rouge .nx{color:#002ace}.highlight .k,.highlighter-rouge .k{color:#a3266f}.highlight .kd,.highlighter-rouge .kd{color:#a32651}.highlight .p,.highlighter-rouge .p{color:#00c982}.highlight .cm,.highlighter-rouge .cm{color:#77536a;opacity:.6}</style> <link rel=canonical href=https://www.sahildave.com/blog/Sketch-Gists-Useful-snippets-for-plugin-development/ > <meta property=og:type content=article> <meta property=og:site_name content="Sahil Dave"> <meta property=og:title content="Sketch Plugin Gists"> <meta property=og:url content=https://www.sahildave.com/blog/Sketch-Gists-Useful-snippets-for-plugin-development/ > <meta property=og:description content="Last week I was developing an internal tool to create a design workflow for my workplace. The process involved creating a style guide for a new project by setting up the branding colours, typefaces, shadows and scrim. All went well..."> <meta property=og:image content=/assets/images/sketch-gists.png> <meta name=twitter:card content=summary_large_image> <meta name=twitter:site content=@sahildave1991> <meta name=twitter:creator content=@sahildave1991> <meta property=article:published_time content=2017-08-10T00:00:00+05:30> <meta property=article:modified_time content=2018-06-13T13:51:12+05:30> <meta name=twitter:label1 value=Words> <meta name=twitter:data1 value="633 words"> <meta name=twitter:label2 value="Reading time"> <meta name=twitter:data2 value="3 mins"> <nav class=navigation> <ul> <li> <a href=/ > Home </a> </li> <li> <a href=/work/ > Work </a> </li> <li> <a href=/blog/ > Blog </a> </li> <li> <a href=/assets/cv.pdf target=_blank> Resume </a> </li> </ul> </nav> <main class=content role=main> <article> <header> <h1 title="Sketch Plugin Gists" data-title="Sketch Plugin Gists"> Sketch Plugin Gists<span class="dot dot--post"> </span> </h1> </header> <div class=post-content> <p>Last week I was developing an internal tool to create a design workflow for my workplace. The process involved creating a style guide for a new project by setting up the branding colours, typefaces, shadows and scrim. All went well until it was required to convert the text layers into symbols so as to generalise them as well.</p> <h2 id=problem>Problem</h2> <p>If you use a text layer in a symbol, you can only override only the text; not any other property including font colour or weight. This makes the symbol not so customisable. For example, you’d have to create multiple types of alert messages instead of just one where you can change the icon and colour.</p> <h2 id=solution>Solution</h2> <p>Until Sketch releases an update where you override all the properties in a text layer it would be good to convert all your text styles into text symbols and use them in your other symbols. In this article, I would share some snippets which acted as utils in my project. I kept these methods in a utils.js file and imported it by adding an import statement on top my main script.</p> <p><code class=highlighter-rouge>@import ‘utils.js’</code></p> <h3 id=finding-page-layer-or-symbol>Finding page, layer or symbol</h3> <script src=https://gist.github.com/sahildave/9ecf7ba5e96a35f6575f9c7a073e659c.js></script> <p>First method is generic, where a list and a key is taken as parameters and name of every element is compared with it. If there is a match, the same item is returned. The other functions are the following:</p> <ol> <li><code class=highlighter-rouge>findLayerByName</code> takes the artboard as the parameter and iterates over the <code class=highlighter-rouge>artboard.layers()</code> list.</li> <li><code class=highlighter-rouge>findPageByName</code> the pages parameter can be fetched from the document by using <code class=highlighter-rouge>doc.pages()</code>.</li> <li><code class=highlighter-rouge>findSymbolByName</code> list of symbols can be obtained by, again, using the document. The <code class=highlighter-rouge>getSymbols(doc)</code> function looks like this.</li> </ol> <div class="language-javascript highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=cm>/**
 * Get all the symbols for a document.
 * @param {MSDocument} doc
 * @return {NSArray}
 */</span>
<span class=kd>function</span> <span class=nx>getSymbols</span><span class=p>(</span><span class=nx>doc</span><span class=p>)</span> <span class=p>{</span>
 <span class=k>return</span> <span class=nx>doc</span><span class=p>.</span><span class=nx>documentData</span><span class=p>().</span><span class=nx>allSymbols</span><span class=p>();</span>
<span class=p>}</span>
</code></pre></div></div> <h3 id=creating-artboard-page-textlayer--symbol>Creating Artboard, Page, TextLayer &amp; Symbol</h3> <script src=https://gist.github.com/sahildave/9192956b791d57e5af9f64821d5b04c6.js></script> <ol> <li>The <code class=highlighter-rouge>createArtboard</code> function is self explanatory. It creates a new <code class=highlighter-rouge>MSArtboardGroup</code>, sets its name, geometry and adds it to the current page. This can be made even more generic by taking the page as a parameter.</li> <li>There are two types of <code class=highlighter-rouge>createPage</code> functions. First creates a new page and adds it to the document data. Important step is to call <code class=highlighter-rouge>doc.loadLayerListPanel()</code> after you add the page, otherwise the page won’t appear on the left unless you collapse and expand the page list. The second function creates a blank page and renames it, as simple as that.</li> <li>Creating text layer also follows the same trend. One thing to remember is to add it to a page by <code class=highlighter-rouge>page.addLayers([layer]);</code>.</li> <li>Creating symbol from layer is a bit verbose. You take in a page, layer and the symbol name; add the layer to the page, convert the same layer to a new symbol, move this new symbol to the symbols page and remove the original symbol instance (which was added to the page). If you pass false in the third parameter of the call: <code class=highlighter-rouge>MSSymbolCreator. createSymbolFromLayers_withName_onSymbolsPage(layers, symbolName, true);</code> it would be added to the current page.</li> </ol> <h3 id=show-symbols-page-get-all-symbols-get-last-symbol>Show symbols page, get all symbols, get last symbol</h3> <script src=https://gist.github.com/sahildave/0533d4cae6e5280d3c1e69c4ae9830d2.js></script> <p>Frankly, only the third function <code class=highlighter-rouge>getBottomSymbol</code> is the interesting function in this gist. It compares the position of the symbols and use the compare function to return the appropriate integer. Comments are added to help you out.</p> <p>I am now planning to release my workflow as a plugin. It essentially would help you out to set a theme for your project. It has inbuilt palette and typeface generator.</p> <hr> <p>This post originally appeared <a href=https://medium.com/sketch-app-sources/sketch-gists-useful-snippets-for-plugin-development-1-3-214a77097142>here</a> on Medium</p> <footer class=post-modified-date> <p> Updated <time datetime=" 2018-06-13T13:51:12+08:00 "> Wednesday, Jun 13, 2018 </time> </p> </footer> </div> </article> </main> <footer class=footer> <ul> <li><a href=/ >Sahil Dave</a></li> <li><a href=https://dribbble.com/sahildave title=dribbble target=_blank>dribbble</a></li> <li><a href=https://www.behance.net/sahildave title=behance target=_blank>behance</a></li> <li><a href=https://www.linkedin.com/in/sahildave1991/ title=linkedin target=_blank>linkedin</a></li> <li><a href=https://twitter.com/sahildave1991 title=twitter target=_blank>twitter</a></li> <li><a href=mailto:sahildave1991@gmail.com title=mail target=_blank>contact</a></li> </ul> </footer> <script>navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&document.body.classList.add("js-system--apple")</script> <script></script> <script>"serviceWorker"in navigator&&"www.sahildave.com"===window.location.hostname&&navigator.serviceWorker.register("/service-worker.js").then(function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)}).catch(function(e){console.log("ServiceWorker registration failed: ",e)})</script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-56407221-3"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-56407221-3")</script>